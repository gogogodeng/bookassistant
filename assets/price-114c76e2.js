import{_ as f,o as s,c as p,a as e,F as k,r as _,d as y,w as g,v as h,t as a}from"./index-caf07fb3.js";function u(){function i(){return((1+Math.random())*65536|0).toString(16).substring(1)}return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}const x={data(){return{message:"",books:[{guid:u(),url:"https://u.dangdang.com/m5xfH",pid:"",title:"关于女儿",price:"30",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/XmZEC",pid:"",title:"诅咒兔（与诺奖得主托卡尔丘克一同入围2022年国际布克奖！）",price:"60",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/nWA4k",pid:"",title:"翦商",price:"60",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/tlgFJ",pid:"",title:"温柔的确定性",price:"50",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/8VGpw",pid:"",title:"与瓦尔泽一起散步",price:"70",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/VRxfH",pid:"",title:"梦旅店",price:"80",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/81m8d",pid:"",title:"大宋之法",price:"30",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/BRa4k",pid:"",title:"一頁文库·芥川龙之介系列（全8册）",price:"100",original_price:"",pr:""},{guid:u(),url:"https://u.dangdang.com/qDztD",pid:"",title:"三岛由纪夫",price:"200",original_price:"",pr:""}],curMoney:300,combo:[]}},computed:{},methods:{addbook(){this.books.push({guid:u(),url:"",title:"",price:"",original_price:"",pr:""})},removebook(i){this.books=this.books.filter(o=>o.guid!=i)},clear(){this.books=[]},search(){localStorage.setItem("books",JSON.stringify(this.books))},getCombo(){let i=this.findCombinations(this.books.map(o=>(o.money=+o.price,o.name=o.title,o)),300);console.log(i),this.combo=i},findCombinations(i,o,m=7){let c=[],d=[];const r=(t,l)=>{if(!(l>o+50||d.length>m)){if(l>o&&l<=o+50){c.push({guid:[...d],name:d.map(n=>i.find(b=>b.guid===n).name).join("#"),money:l});return}for(let n=t;n<i.length;n++)d.includes(i[n].guid)||(d.push(i[n].guid),r(n+1,l+i[n].money),d.pop())}};return r(0,0),c.sort((t,l)=>{const n=Math.abs(t.money-o),b=Math.abs(l.money-o);return n-b}),c.slice(0,m)}},mounted(){localStorage.getItem("books")&&(this.books=JSON.parse(localStorage.getItem("books")))}},w=e("hr",null,null,-1),C={border:""},V=e("tr",null,[e("td",{style:{width:"300px"}},"书名"),e("td",{style:{width:"250px"}},"链接"),e("td",{style:{width:"100px"}},"现价"),e("td",{style:{width:"100px"}},"原价"),e("td",{style:{width:"100px"}},"折扣率")],-1),v=["onUpdate:modelValue"],S=["onUpdate:modelValue"],M=["onUpdate:modelValue"],U={style:{position:"relative"}},B=["onClick"],D=e("br",null,null,-1),N=e("br",null,null,-1);function F(i,o,m,c,d,r){return s(),p("div",null,[e("button",{onClick:o[0]||(o[0]=(...t)=>r.search&&r.search(...t))},"暂存"),e("button",{onClick:o[1]||(o[1]=(...t)=>r.clear&&r.clear(...t))},"清空"),w,e("table",C,[V,(s(!0),p(k,null,_(d.books,t=>(s(),p("tr",{key:t.guid},[e("td",null,[g(e("input",{type:"text","onUpdate:modelValue":l=>t.title=l,style:{"max-width":"100%",width:"100%"}},null,8,v),[[h,t.title]])]),e("td",null,[g(e("input",{type:"text","onUpdate:modelValue":l=>t.url=l,style:{"max-width":"250px",width:"250px"}},null,8,S),[[h,t.url]])]),e("td",null,[g(e("input",{type:"number","onUpdate:modelValue":l=>t.price=l,style:{"max-width":"50px",width:"50px"}},null,8,M),[[h,t.price]])]),e("td",null,a(t.original_price),1),e("td",U,[y(a(t.pr)+" ",1),e("span",{onClick:l=>r.removebook(t.guid),style:{position:"absolute",right:"0",top:"0",cursor:"pointer",color:"red"}},"×",8,B)])]))),128))]),D,e("button",{onClick:o[2]||(o[2]=(...t)=>r.addbook&&r.addbook(...t))},"添加"),N,y(" 凑单金额"),g(e("input",{type:"number","onUpdate:modelValue":o[3]||(o[3]=t=>d.curMoney=t)},null,512),[[h,d.curMoney]]),e("button",{onClick:o[4]||(o[4]=(...t)=>r.getCombo&&r.getCombo(...t))},"计算凑单组合"),e("div",null,[(s(!0),p(k,null,_(d.combo,(t,l)=>(s(),p("ul",{key:l},[e("li",null,"组合"+a(l+1)+"：",1),(s(!0),p(k,null,_(t.name.split("#"),n=>(s(),p("li",{key:n},"【"+a(n)+"】",1))),128)),e("li",null,"价格："+a(t.money),1)]))),128))])])}const J=f(x,[["render",F]]);export{J as default};
